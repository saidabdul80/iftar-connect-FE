import{i as f,r,o as m,a as b,e,w as o,C as le,u as n,p as q,F as A,b as l,x as ae,f as y,c as H,j as ne,k as oe,E as I,G as se,H as de,I as re,s as L,q as J,t as $,S as K,v as ie}from"./entry.b15e0e18.js";const V=()=>{var k=new Date,h=String(k.getDate()).padStart(2,"0"),z=String(k.getMonth()+1).padStart(2,"0"),t=k.getFullYear();return t+"-"+z+"-"+h},ue={class:"s-text-field mb-3"},me={class:"d-flex"},ce={class:"d-flex mt-3 mb-3"},_e={class:"d-flex justify-content-center flex-column align-center"},pe=l("br",null,null,-1),ve=l("p",{class:"text-h6"},"No Internet ",-1),fe={__name:"Meal",props:{meal:{meal_type:"",phone_number:"",address:"",maximum_capacity:0,address_url:"",longitude:"",latitude:"",time_slot:"",landmark:"",start_date:V(),end_date:V()},update:{type:Boolean,default:function(){return!1}}},emits:["saveEvent"],setup(k,{emit:h}){const t=k.meal,C=f(!1),c=f(null),u=f(!1);function M(){t.start_date=V(),t.end_date=V(),u.value=!0}function U(){u.value=!1}function T(p){t.address_url=p.url,t.address=p.formatted_address,t.latitude=p.geometry.location.lat(),t.longitude=p.geometry.location.lng()}const _={name:[p=>p?!0:"This Field Required"]};async function D(){const{valid:p}=await c.value.validate();return!!p}function N(){location.reload()}async function B(){await D()&&(t.latitude==""&&(C.value=!0),h("saveEvent",t))}return(p,a)=>{const x=r("v-text-field"),P=r("GMapAutocomplete"),w=r("v-btn"),v=r("v-form"),s=r("v-icon"),E=r("v-card-text"),F=r("v-card"),R=r("v-dialog");return m(),b(A,null,[e(v,{onSubmit:a[11]||(a[11]=le(()=>{},["prevent"])),ref_key:"saveMealForm",ref:c},{default:o(()=>[e(x,{color:"green",variant:"underlined",rules:_.name,modelValue:n(t).meal_type,"onUpdate:modelValue":a[0]||(a[0]=d=>n(t).meal_type=d),class:"mb-3",label:"Meal Type","hide-details":"auto"},null,8,["rules","modelValue"]),l("div",ue,[e(P,{"aria-placeholder":"",value:n(t).address,class:"pa-0",onPlace_changed:T},null,8,["value"]),l("label",{style:ae(n(t).address!=""?{"font-size":"10px",top:"2px"}:{top:"12px"}),class:"label"},"Address",4)]),e(x,{color:"green",variant:"underlined",rules:_.name,modelValue:n(t).landmark,"onUpdate:modelValue":a[1]||(a[1]=d=>n(t).landmark=d),class:"mb-3",label:"Landmark","hide-details":"auto"},null,8,["rules","modelValue"]),e(x,{color:"green",variant:"underlined",modelValue:n(t).phone_number,"onUpdate:modelValue":a[2]||(a[2]=d=>n(t).phone_number=d),class:"mb-3",label:"Contact Number","hide-details":"auto"},null,8,["modelValue"]),e(x,{color:"green",variant:"underlined",rules:_.name,modelValue:n(t).maximum_capacity,"onUpdate:modelValue":a[3]||(a[3]=d=>n(t).maximum_capacity=d),class:"mb-3",label:"Slots","hide-details":"auto"},null,8,["rules","modelValue"]),e(x,{color:"green",variant:"underlined",type:"time",rules:_.name,modelValue:n(t).time_slot,"onUpdate:modelValue":a[4]||(a[4]=d=>n(t).time_slot=d),class:"mb-3",label:"Time Slot","hide-details":"auto"},null,8,["rules","modelValue"]),l("div",me,[e(w,{onClick:a[5]||(a[5]=d=>M()),size:"small",disabled:n(u),color:"green",class:"me-2"},{default:o(()=>[y("Today")]),_:1},8,["disabled"]),e(w,{onClick:a[6]||(a[6]=d=>U()),disabled:!n(u),size:"small",color:"green",class:""},{default:o(()=>[y("Range")]),_:1},8,["disabled"])]),l("div",ce,[e(x,{disabled:n(u),type:"date",color:"green",variant:"underlined",rules:_.name,modelValue:n(t).start_date,"onUpdate:modelValue":a[7]||(a[7]=d=>n(t).start_date=d),class:"mb-3 me-4",label:"start_date","hide-details":"auto"},null,8,["disabled","rules","modelValue"]),e(x,{disabled:n(u),type:"date",color:"green",variant:"underlined",rules:_.name,modelValue:n(t).end_date,"onUpdate:modelValue":a[8]||(a[8]=d=>n(t).end_date=d),class:"mb-3",label:"end_date","hide-details":"auto"},null,8,["disabled","rules","modelValue"])]),l("div",_e,[k.update?(m(),H(w,{key:1,type:"submit",onClick:a[10]||(a[10]=d=>B()),class:"bg-green text-white mb-3 px-10",size:"x-large"},{default:o(()=>[y("Update")]),_:1})):(m(),H(w,{key:0,type:"submit",onClick:a[9]||(a[9]=d=>B()),class:"w-50 bg-green text-white mb-3 px-10",size:"x-large"},{default:o(()=>[y("Submit")]),_:1}))])]),_:1},512),e(R,{modelValue:n(C),"onUpdate:modelValue":a[13]||(a[13]=d=>q(C)?C.value=d:null),width:"auto"},{default:o(()=>[e(F,null,{default:o(()=>[e(E,{class:"pa-6 d-flex align-center",style:{"max-width":"400px"}},{default:o(()=>[e(s,{size:"large",color:"orange",class:"me-2",icon:"mdi-information"}),pe,ve,e(w,{color:"green",class:"ms-2",onClick:a[12]||(a[12]=d=>N())},{default:o(()=>[y("Reload")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};const xe=l("thead",null,[l("tr",null,[l("th",{class:"text-left"},"S/N"),l("th",{class:"text-left"},"Phone Numbers")])],-1),ge={class:"text-green mt-2 mb-8",style:{"text-transform":"uppercase"}},be=l("thead",null,[l("tr",null,[l("th",{class:"text-left"},"S/N"),l("th",{class:"text-left"},"Meal"),l("th",null,"Action")])],-1),ye={class:"text-left"},he={key:0},we=["href"],Ve={key:1},ke=l("br",null,null,-1),Ce=l("br",null,null,-1),Me=l("br",null,null,-1),$e={__name:"setup_meal",async setup(k){let h,z;const{$api:t}=ne(),C=f(["meal_type","phone_number","address","landmark","address_url","start_date","end_date","time_slot","maximum_capacity"]),c=f(!1),u=f(!1),M=f(!1),U=f("Setup"),T=f([]),_=f([{meal_type:"Moi moi and Pap",phone_number:"080994957",address:"Minna, Niger",maximum_capacity:10,address_url:"#",longitude:0,latitude:0,landmark:"",start_date:V(),end_date:V()}]),D={meal_type:"",phone_number:"",address:"",maximum_capacity:0,address_url:"",logitude:"",latitude:"",time_slot:"",start_date:V(),end_date:V()};oe();let N=I(D);function B(v){this.meal=I(v),M.value=!0,U.value="Update",c.value=!0}function p(){}function a(){M.value=!1,U.value="Setup",c.value=!0,N=I(D)}async function x(v){let s=await t.postData("/organizers/reservations/"+v,"GET",{},"/organizer_login");s.error||(u.value=!0,T.value=s.responseBody)}async function P(v){try{if(M.value){let s=await t.postData("/meals","PATCH",v,"/organizer_login");s.error||(c.value=!1,_.value.unshift(s.responseBody),await K.fire("Meal Updated"),location.reload())}else{let s=await t.postData("/meals","POST",v,"/organizer_login");s.error||(c.value=!1,_.value.unshift(s.responseBody),K.fire("Meal Created"))}}catch(s){console.log(s)}}let w=([h,z]=se(()=>t.postData("/organizers/meals","GET",{},"/organizer_login")),h=await h,z(),h);return w.error||(_.value=w.responseBody.data),de(async()=>{}),(v,s)=>{const E=r("v-card-title"),F=r("v-table"),R=r("v-card-text"),d=r("v-spacer"),S=r("v-btn"),Q=r("v-card-actions"),O=r("v-card"),Y=r("v-dialog"),W=r("center"),X=fe,Z=r("v-col"),ee=r("v-row"),G=r("v-icon"),te=re("maximum");return m(),b(A,null,[e(Y,{size:"large",modelValue:n(u),"onUpdate:modelValue":s[1]||(s[1]=i=>q(u)?u.value=i:null),persistent:"",width:"auto"},{default:o(()=>[e(O,{style:{"min-width":"350px"},class:"pa-4"},{default:o(()=>[e(E,{class:"text-h5"},{default:o(()=>[y(" All today's Reservation ")]),_:1}),e(R,null,{default:o(()=>[e(F,{density:"compact","fixed-header":""},{default:o(()=>[xe,l("tbody",null,[(m(!0),b(A,null,L(n(T),(i,j)=>(m(),b("tr",{key:i.id},[l("td",null,$(j+1),1),l("td",null,$(i.beneficiary_phone_number),1)]))),128))])]),_:1})]),_:1}),e(Q,null,{default:o(()=>[e(d),e(S,{color:"green-darken-1",variant:"text",onClick:s[0]||(s[0]=i=>u.value=!1)},{default:o(()=>[y("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,{onClick:s[2]||(s[2]=i=>a()),color:"green"},{default:o(()=>[y("Create Meal")]),_:1}),e(Y,{modelValue:n(c),"onUpdate:modelValue":s[5]||(s[5]=i=>q(c)?c.value=i:null),persistent:"","max-width":"540px","min-width":"300px",width:"90%"},{default:o(()=>[J(l("template",null,null,512),[[te,{props:v.props},void 0,{"capacity:activator":!0}]]),e(O,null,{default:o(()=>[e(E,{class:"position-relative"},{default:o(()=>[e(W,null,{default:o(()=>[l("h3",ge,$(n(U))+" IFTAR MEAL",1)]),_:1})]),_:1}),e(R,{class:"pb-0 position-relative"},{default:o(()=>[e(X,{meal:n(N),update:n(M),onSaveEvent:s[3]||(s[3]=i=>P(i))},null,8,["meal","update"]),e(S,{style:{position:"absolute",right:"10px",bottom:"10px"},color:"green-darken-1",variant:"text",onClick:s[4]||(s[4]=i=>c.value=!1)},{default:o(()=>[y("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(F,{density:"compact","fixed-header":""},{default:o(()=>[be,l("tbody",null,[(m(!0),b(A,null,L(n(_),(i,j)=>(m(),b("tr",{key:i.name},[l("td",null,$(j+1),1),l("td",null,[e(ee,{style:{overflow:"auto",height:"102px"}},{default:o(()=>[(m(!0),b(A,null,L(Object.keys(i),g=>J((m(),H(Z,{cols:"6",md:"4",lg:"2",xl:"1",key:g},{default:o(()=>[l("div",null,[l("b",ye,$(g.replaceAll("_"," ")),1)]),g=="address_url"?(m(),b("p",he,[l("a",{href:i[g],class:"underlined text-orange"},"View Address",8,we)])):(m(),b("p",Ve,$(i[g]),1))]),_:2},1024)),[[ie,n(C).includes(g)]])),128))]),_:2},1024)]),l("td",null,[e(S,{onClick:g=>x(i.id),size:"small",class:"px-0 text-white mx-1 mt-2",color:"orange"},{default:o(()=>[e(G,{icon:"mdi-book"})]),_:2},1032,["onClick"]),ke,e(S,{onClick:g=>B(i),size:"small",class:"px-0 text-white mx-1 mt-2",color:"orange"},{default:o(()=>[e(G,{icon:"mdi-text-box-edit-outline"})]),_:2},1032,["onClick"]),Ce,e(S,{onClick:g=>void 0,size:"small",class:"px-0 text-white mx-1 mt-2",color:"orange"},{default:o(()=>[e(G,{icon:"mdi-delete"})]),_:2},1032,["onClick"]),Me])]))),128))])]),_:1})],64)}}};export{$e as default};
